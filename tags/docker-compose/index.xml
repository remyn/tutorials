<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>One step at a time ... </title>
    <link>https://remyn.github.io/tutorials/tags/docker-compose/</link>
    <language>en-us</language>
    <author>remyn</author>
    <rights>(C) 2016</rights>
    <updated>2016-08-16 11:32:49 &#43;1200 NZST</updated>

    
      
        <item>
          <title>Starting with docker</title>
          <link>https://remyn.github.io/tutorials/post/docker-start/</link>
          <pubDate>Tue, 16 Aug 2016 11:32:49 NZST</pubDate>
          <author>remyn</author>
          <guid>https://remyn.github.io/tutorials/post/docker-start/</guid>
          <description>

&lt;p&gt;docker-machine : a simple tool to manage our virtual machines hosting our containers.&lt;/p&gt;

&lt;h1 id=&#34;docker&#34;&gt;Docker&lt;/h1&gt;

&lt;p&gt;For the unlucky user that doesn&amp;rsquo;t have Windows 10, we can&amp;rsquo;t have a native docker daemon. Instead, we are going to use docker from a linux box.
Here we are going to create a virtual machine with a lightweigth linux set up with a docker daemon.&lt;/p&gt;

&lt;p&gt;All the following command should be enter inside a &lt;code&gt;git-bash&lt;/code&gt; command line tool. If you have installed Git support for your VS2015 it should be installed.
Just start one instance as administrator and then go to your home folder:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cd $HOME
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can get the file used in this tutorial by cloning the repository &lt;a href=&#34;https://github.com/remyn/tutorials-files&#34;&gt;&lt;code&gt;tutorials&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git clone https://github.com/remyn/tutorials-files
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;get-the-tools&#34;&gt;Get the tools&lt;/h2&gt;

&lt;p&gt;First thing, we will need to load the 2 docker tools : &lt;code&gt;docker-machine&lt;/code&gt; and &lt;code&gt;docker-compose&lt;/code&gt;.
You can used the scripts &lt;a href=&#34;https://github.com/remyn/tutorials-files/raw/master/get-docker-machine.sh&#34;&gt;get-docker-machine.sh&lt;/a&gt; and &lt;a href=&#34;https://github.com/remyn/tutorials-files/raw/master/get-docker-compose.sh&#34;&gt;get-docker-compose.sh&lt;/a&gt; to download them into a given folder (e.g. &lt;strong&gt;docker-demo&lt;/strong&gt;).&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;./tutorials/get-docker-machine.sh docker-demo
./tutorials/get-docker-compose.sh docker-demo
&lt;/code&gt;&lt;/pre&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: If no folder is passed the default &lt;code&gt;docker-bin&lt;/code&gt; is used.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Great, so by now you should have the tools into the folder docker-demo.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://remyn.github.io/tutorials/static/images/docker-exe-folder.png&#34; alt=&#34;docker-exe-in-folder&#34; title=&#34;docker exe in folder.&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;create-the-virtual-machine&#34;&gt;Create the virtual machine&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s create a virtual machine with docker on it !
Here we are going to use HyperV but the same could be acheived with the VirtualBox driver. Use the one that you have already installed on your computer.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: It is one or the other, because once activated HyperV from your Windows features, VirtualBox can&amp;rsquo;t function anymore!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code&gt;cd docker-demo
docker-machine create --driver hyperv docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;With HyperV, if you prefer using a specific network interface (e.g. WIFI), you can indicate a virtual-switch with the &amp;ndash;hyperv-virtual-switch parameter:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine create --driver hyperv --hyperv-virtual-switch &amp;quot;External LAN&amp;quot; docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;That&amp;rsquo;s it !&lt;/em&gt; The virtual machine has been setup with a lightweight linux footprint. The latest docker daemon has been set up and it is running.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;List&lt;/strong&gt; the virtual machine:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine ls
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Stop&lt;/strong&gt; the virtual machine:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine stop docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Start&lt;/strong&gt; the virtual machine&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine start docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Remove&lt;/strong&gt; (delete) the virtual-machine:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine rm docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here we can see that a simple executable suffice to manage the virtual machine. You can use another graphic tool to manage your virtual machine and push container into: &lt;a href=&#34;https://kitematic.com/&#34;&gt;https://kitematic.com/&lt;/a&gt; .&lt;/p&gt;

&lt;h2 id=&#34;remote-control-the-virtual-machine&#34;&gt;Remote control the virtual machine&lt;/h2&gt;

&lt;p&gt;To remote login into the virtual machine, we need to set up the environment variable that docker will use to communicate with the daemon (IP, port &amp;hellip;):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine env docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The previous command do just a print of the export command to create the environment variables. So to really create them, just execute the command by copying the last line printed:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;eval $(&amp;quot;C:\Users\remyn\bin\docker-machine.exe&amp;quot; env docker-host)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Remote login&lt;/strong&gt; with the virtual machine:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker-machine ssh docker-host
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;windows-docker-client&#34;&gt;Windows docker client&lt;/h2&gt;

&lt;p&gt;While we can&amp;rsquo;t have a native docker daemon on windows (8.1 and before), we can have a client one to natively send command to a docker daemon into a linux machine.&lt;/p&gt;

&lt;p&gt;From an administartor console, simply install first &lt;a href=&#34;http://chocolatey.org&#34;&gt;Chocolatey&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Then to install the client docker, just type:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;choco install docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, you can simply communicate with teh docker daemon of your previous virtual machine:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker ps
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
      
    

  </channel>
</rss>
